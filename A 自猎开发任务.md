å¥½çš„ï¼æˆ‘æ¥å¸®ä½ è®¾è®¡ Postman æµ‹è¯•æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å®Œæ•´çš„è¯·æ±‚é…ç½®å’Œæµ‹è¯•ç”¨ä¾‹ã€‚

---

## ä¸€ã€Postman åŸºæœ¬é…ç½®

### 1. è¯·æ±‚ç±»å‹å’Œ URL
```
æ–¹æ³•ï¼šPOST
URLï¼šhttp://127.0.0.1:9006/virturlInterview
```

### 2. Headers è®¾ç½®
åœ¨ Postman çš„ **Headers** æ ‡ç­¾é¡µæ·»åŠ ï¼š

| Key | Value |
|-----|-------|
| `Content-Type` | `application/json` |
| `token` | ï¼ˆå¦‚æœéœ€è¦é‰´æƒï¼Œæ ¹æ®ä½ çš„å®é™… token å¡«å†™ï¼‰ |

**æ³¨æ„**ï¼šæ ¹æ®ä»£ç  `auth_middleware.py`ï¼Œè¿™ä¸ªæ¥å£é»˜è®¤ä¸éœ€è¦ tokenï¼ˆå› ä¸ºä¸åœ¨å—é™è·¯ç”±åˆ—è¡¨é‡Œï¼‰ï¼Œæ‰€ä»¥å¯ä»¥å…ˆä¸åŠ  token æµ‹è¯•ã€‚

---

## äºŒã€è¯·æ±‚ Bodyï¼ˆJSON æ ¼å¼ï¼‰

### æµ‹è¯•ç”¨ä¾‹ 1ï¼šæœ€ç®€å•çš„ä¸­æ–‡ç™½é¢†é¢è¯•ï¼ˆé¦–æ¬¡å¯¹è¯ï¼‰

åœ¨ Postman çš„ **Body** æ ‡ç­¾é¡µï¼Œé€‰æ‹© `raw` â†’ `JSON`ï¼Œå¡«å…¥ï¼š

```json
{
  "id": "test_interview_001",
  "userPortrait": "æˆ‘å«å¼ ä¸‰ï¼Œ5å¹´Pythonåç«¯å¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰Djangoã€Flaskæ¡†æ¶ï¼Œåšè¿‡ç”µå•†å’Œé‡‘èç³»ç»Ÿ",
  "jdTitle": "é«˜çº§Pythonå·¥ç¨‹å¸ˆ",
  "jdPortrait": "è´Ÿè´£åç«¯APIå¼€å‘ï¼Œè¦æ±‚ç†Ÿæ‚‰å¾®æœåŠ¡æ¶æ„ï¼Œæœ‰é«˜å¹¶å‘ç³»ç»Ÿç»éªŒ",
  "interviewType": 1,
  "interviewLanguage": "zhongwen",
  "dialogHistory": []
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `id`ï¼šé¢è¯•ä¼šè¯ IDï¼ˆéšä¾¿å†™ï¼Œç”¨äºåŒºåˆ†ä¸åŒé¢è¯•ï¼‰
- `userPortrait`ï¼šæ±‚èŒè€…ç”»åƒï¼ˆç®€å†æ‘˜è¦ï¼‰
- `jdTitle`ï¼šå²—ä½åç§°
- `jdPortrait`ï¼šå²—ä½æè¿°/è¦æ±‚
- `interviewType`ï¼š`1` = ç™½é¢†ï¼ˆä¸“ä¸šé¢è¯•ï¼‰ï¼Œ`0` = è“é¢†ï¼ˆç®€åŒ–é¢è¯•ï¼‰
- `interviewLanguage`ï¼šè¯­è¨€é€‰é¡¹ï¼ˆè§ä¸‹æ–¹æ”¯æŒåˆ—è¡¨ï¼‰
- `dialogHistory`ï¼šå¯¹è¯å†å²ï¼ˆé¦–æ¬¡é¢è¯•ä¼ ç©ºæ•°ç»„ `[]`ï¼‰

---

### æµ‹è¯•ç”¨ä¾‹ 2ï¼šå¤šè½®å¯¹è¯ï¼ˆå¸¦å†å²è®°å½•ï¼‰

```json
{
  "id": "test_interview_001",
  "userPortrait": "æˆ‘å«å¼ ä¸‰ï¼Œ5å¹´Pythonåç«¯å¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰Djangoã€Flaskæ¡†æ¶",
  "jdTitle": "é«˜çº§Pythonå·¥ç¨‹å¸ˆ",
  "jdPortrait": "è´Ÿè´£åç«¯APIå¼€å‘ï¼Œè¦æ±‚ç†Ÿæ‚‰å¾®æœåŠ¡æ¶æ„",
  "interviewType": 1,
  "interviewLanguage": "zhongwen",
  "dialogHistory": [
    {
      "role": "assistant",
      "content": "æ‚¨å¥½ï¼æ¬¢è¿å‚åŠ æˆ‘ä»¬é«˜çº§Pythonå·¥ç¨‹å¸ˆå²—ä½çš„é¢è¯•ã€‚è¯·å…ˆåšä¸ªè‡ªæˆ‘ä»‹ç»ã€‚"
    },
    {
      "role": "user",
      "content": "æ‚¨å¥½ï¼Œæˆ‘å«å¼ ä¸‰ï¼Œæœ‰5å¹´Pythonå¼€å‘ç»éªŒï¼Œä¸»è¦åšè¿‡ç”µå•†å’Œé‡‘èç³»ç»Ÿçš„åç«¯å¼€å‘ã€‚"
    },
    {
      "role": "assistant",
      "content": "å¾ˆå¥½ã€‚èƒ½å…·ä½“è¯´è¯´ä½ åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ä¼˜åŒ–ç»éªŒå—ï¼Ÿ"
    },
    {
      "role": "user",
      "content": "æˆ‘ä»¬ä¹‹å‰ç”µå•†ç§’æ€ç³»ç»Ÿç”¨äº†Redisç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°ï¼ŒQPSä»1000æå‡åˆ°5000ã€‚"
    }
  ]
}
```

**æ³¨æ„**ï¼š`dialogHistory` æ˜¯æ•°ç»„ï¼Œæ¯æ¡æ¶ˆæ¯åŒ…å«ï¼š
- `role`ï¼š`"assistant"` è¡¨ç¤ºé¢è¯•å®˜ï¼Œ`"user"` è¡¨ç¤ºå€™é€‰äºº
- `content`ï¼šå¯¹è¯å†…å®¹

---

### æµ‹è¯•ç”¨ä¾‹ 3ï¼šè‹±æ–‡é¢è¯•

```json
{
  "id": "test_interview_002",
  "userPortrait": "I am John, a senior Python developer with 5 years of experience in e-commerce and fintech",
  "jdTitle": "Senior Python Engineer",
  "jdPortrait": "Responsible for backend API development, microservices architecture required",
  "interviewType": 1,
  "interviewLanguage": "yingwen",
  "dialogHistory": []
}
```

---

### æµ‹è¯•ç”¨ä¾‹ 4ï¼šè“é¢†é¢è¯•ï¼ˆç®€åŒ–æ¨¡å¼ï¼‰

```json
{
  "id": "test_interview_003",
  "userPortrait": "æˆ‘å«æå››ï¼Œ3å¹´ä»“åº“ç®¡ç†ç»éªŒï¼Œç†Ÿæ‚‰è´§ç‰©å…¥åº“å‡ºåº“æµç¨‹",
  "jdTitle": "ä»“åº“ä¸»ç®¡",
  "jdPortrait": "ç®¡ç†20äººå›¢é˜Ÿï¼Œè´Ÿè´£æ—¥å¸¸ä»“å‚¨ç®¡ç†å’Œåº“å­˜ç›˜ç‚¹",
  "interviewType": 0,
  "interviewLanguage": "zhongwen",
  "dialogHistory": []
}
```

---

## ä¸‰ã€æ”¯æŒçš„è¯­è¨€åˆ—è¡¨

æ ¹æ®ä»£ç  `service/virtual_interview.py`ï¼Œå¯é€‰çš„ `interviewLanguage` å€¼ï¼š

| å€¼ | è¯­è¨€ | è¯´æ˜ |
|----|------|------|
| `zhongwen` | ä¸­æ–‡ | é»˜è®¤ |
| `yingwen` | è‹±æ–‡ | English |
| `riyu` | æ—¥è¯­ | æ—¥æœ¬èª |
| `hanyu` | éŸ©è¯­ | í•œêµ­ì–´ |
| `xibanyayu` | è¥¿ç­ç‰™è¯­ | EspaÃ±ol |
| `yinniyu` | å°å°¼è¯­ | Bahasa Indonesia |
| `fayu` | æ³•è¯­ | FranÃ§ais |
| `deyu` | å¾·è¯­ | Deutsch |
| `taiyu` | æ³°è¯­ | à¹„à¸—à¸¢ |

---

## å››ã€å¦‚ä½•åœ¨ Postman æŸ¥çœ‹æµå¼å“åº”ï¼ˆSSEï¼‰

### æ–¹æ³•1ï¼šç›´æ¥æŸ¥çœ‹åŸå§‹å“åº”

1. ç‚¹å‡» **Send** å‘é€è¯·æ±‚
2. ç­‰å¾…å“åº”ï¼ˆå¯èƒ½éœ€è¦å‡ ç§’åˆ°åå‡ ç§’ï¼‰
3. åœ¨å“åº”åŒºåŸŸä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æµå¼æ•°æ®ï¼š

```
data: {"type":"chunk","content":"æ‚¨å¥½"}

data: {"type":"chunk","content":"ï¼"}

data: {"type":"chunk","content":"æ¬¢è¿"}

data: {"type":"chunk","content":"å‚åŠ "}

data: {"type":"chunk","content":"æˆ‘ä»¬"}

data: {"type":"chunk","content":"çš„"}

data: {"type":"chunk","content":"é¢è¯•"}

...

data: {"type":"DONE","content":"[DONE]"}
```

### æ–¹æ³•2ï¼šä½¿ç”¨ Postman çš„ Stream åŠŸèƒ½ï¼ˆæ¨èï¼‰

Postman è¾ƒæ–°ç‰ˆæœ¬æ”¯æŒ SSE é¢„è§ˆï¼š
1. å‘é€è¯·æ±‚åï¼Œå“åº”åŒºåŸŸä¼šè‡ªåŠ¨è¯†åˆ« `text/event-stream`
2. ç‚¹å‡» **Stream** æˆ– **Pretty** æ ‡ç­¾é¡µ
3. å¯ä»¥çœ‹åˆ°é€æ¡æ¨é€çš„ JSON æ•°æ®

---

## äº”ã€æµ‹è¯•æ£€æŸ¥ç‚¹

### æˆåŠŸçš„å“åº”æ ‡å¿—
- **çŠ¶æ€ç **ï¼š`200 OK`
- **Content-Type**ï¼š`text/event-stream; charset=utf-8`
- **å“åº”å†…å®¹**ï¼šåŒ…å«å¤šæ¡ `data: {...}` æ ¼å¼çš„æ¶ˆæ¯
- **ç»“æŸæ ‡è®°**ï¼šæœ€åä¸€æ¡æ˜¯ `{"type":"DONE","content":"[DONE]"}`

### å¯èƒ½çš„é”™è¯¯æƒ…å†µ

#### 1. 500 Internal Server Error
**åŸå› **ï¼š
- ç¼ºå°‘å¿…å¡«å­—æ®µï¼ˆå¦‚ `id`ã€`userPortrait`ï¼‰
- Redis è¿æ¥å¤±è´¥
- å¤§æ¨¡å‹ API Key æ— æ•ˆ

**æ’æŸ¥**ï¼šæŸ¥çœ‹æœåŠ¡ç«¯æ—¥å¿—ï¼ˆç»ˆç«¯è¾“å‡ºï¼‰

#### 2. 401 Unauthorized
**åŸå› **ï¼šToken éªŒè¯å¤±è´¥ï¼ˆå¦‚æœå¯ç”¨äº†é‰´æƒï¼‰

**è§£å†³**ï¼š
- æ£€æŸ¥ `config.yaml` é‡Œçš„ `auth` é…ç½®
- å¦‚æœ `auth: 1`ï¼Œéœ€è¦åœ¨ Redis é‡Œå­˜å…¥æœ‰æ•ˆ token

#### 3. 429 Too Many Requests
**åŸå› **ï¼šè§¦å‘é™æµï¼ˆ6ç§’å†…é‡å¤è¯·æ±‚ï¼‰

**è§£å†³**ï¼šç­‰å¾… 6 ç§’åå†è¯•

#### 4. å“åº”ä¸ºç©ºæˆ–å¡ä½
**åŸå› **ï¼š
- å¤§æ¨¡å‹ API è°ƒç”¨è¶…æ—¶
- ç½‘ç»œé—®é¢˜

**æ’æŸ¥**ï¼šæŸ¥çœ‹æœåŠ¡ç«¯æ—¥å¿—ï¼Œç¡®è®¤æ˜¯å¦è°ƒç”¨äº†å¤–éƒ¨ API

---

## å…­ã€å®Œæ•´çš„ Postman è¯·æ±‚ç¤ºä¾‹æˆªå›¾è¯´æ˜

### é…ç½®æ­¥éª¤ï¼š

1. **æ–°å»ºè¯·æ±‚**
   - ç‚¹å‡» Postman å·¦ä¸Šè§’ `New` â†’ `HTTP`

2. **è®¾ç½®è¯·æ±‚æ–¹æ³•å’Œ URL**
   ```
   POST http://127.0.0.1:9006/virturlInterview
   ```

3. **è®¾ç½® Headers**
   - Key: `Content-Type`
   - Value: `application/json`

4. **è®¾ç½® Body**
   - é€‰æ‹© `raw`
   - ä¸‹æ‹‰æ¡†é€‰æ‹© `JSON`
   - ç²˜è´´ä¸Šé¢çš„æµ‹è¯•ç”¨ä¾‹ JSON

5. **ç‚¹å‡» Send**

6. **æŸ¥çœ‹å“åº”**
   - å“åº”åŒºåŸŸä¼šé€æ¡æ˜¾ç¤ºæµå¼æ•°æ®
   - ç­‰å¾…ç›´åˆ°çœ‹åˆ° `[DONE]` æ ‡è®°

---

## ä¸ƒã€è¿›é˜¶æµ‹è¯•åœºæ™¯

### 1. æµ‹è¯•å¼‚å¸¸è¾“å…¥

**ç¼ºå°‘å¿…å¡«å­—æ®µ**ï¼š
```json
{
  "id": "test_001"
  // æ•…æ„ç¼ºå°‘å…¶ä»–å­—æ®µ
}
```
**é¢„æœŸ**ï¼šåº”è¯¥è¿”å›é”™è¯¯æˆ–ä½¿ç”¨é»˜è®¤å€¼

---

### 2. æµ‹è¯•è¶…é•¿å¯¹è¯å†å²

```json
{
  "id": "test_long_history",
  "userPortrait": "æµ‹è¯•ç”¨æˆ·",
  "jdTitle": "æµ‹è¯•å²—ä½",
  "jdPortrait": "æµ‹è¯•æè¿°",
  "interviewType": 1,
  "interviewLanguage": "zhongwen",
  "dialogHistory": [
    // æ·»åŠ  20 è½®ä»¥ä¸Šçš„å¯¹è¯
    {"role": "assistant", "content": "é—®é¢˜1"},
    {"role": "user", "content": "å›ç­”1"},
    // ...
  ]
}
```
**é¢„æœŸ**ï¼šæµ‹è¯•ç³»ç»Ÿåœ¨é•¿å¯¹è¯ä¸‹çš„è¡¨ç°

---

### 3. æµ‹è¯•ç‰¹æ®Šå­—ç¬¦

```json
{
  "id": "test_special_chars",
  "userPortrait": "æˆ‘çš„ç»éªŒåŒ…æ‹¬ï¼š\"å¼•å·\"ã€æ¢è¡Œ\nç¬¦å·ã€Emoji ğŸ˜Š",
  "jdTitle": "æµ‹è¯•<script>alert('xss')</script>",
  "jdPortrait": "SQLæ³¨å…¥'; DROP TABLE users;--",
  "interviewType": 1,
  "interviewLanguage": "zhongwen",
  "dialogHistory": []
}
```
**é¢„æœŸ**ï¼šç³»ç»Ÿåº”è¯¥æ­£ç¡®å¤„ç†ï¼Œä¸ä¼šå´©æºƒ

---

## å…«ã€å¿«é€Ÿå¼€å§‹æ¨¡æ¿ï¼ˆå¤åˆ¶å³ç”¨ï¼‰

```json
{
  "id": "quick_test_001",
  "userPortrait": "5å¹´Pythonå¼€å‘ï¼Œç†Ÿæ‚‰Djangoã€Flaskã€FastAPIï¼Œæœ‰ç”µå•†å’Œé‡‘èç³»ç»Ÿç»éªŒ",
  "jdTitle": "Pythoné«˜çº§å·¥ç¨‹å¸ˆ",
  "jdPortrait": "è´Ÿè´£åç«¯å¼€å‘ï¼Œéœ€è¦å¾®æœåŠ¡å’Œé«˜å¹¶å‘ç»éªŒ",
  "interviewType": 1,
  "interviewLanguage": "zhongwen",
  "dialogHistory": []
}
```

**ç›´æ¥å¤åˆ¶åˆ° Postman Bodyï¼Œç‚¹å‡» Send å³å¯æµ‹è¯•ï¼**

---

å¸Œæœ›è¿™ä¸ªæµ‹è¯•æŒ‡å—å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœé‡åˆ°å…·ä½“é”™è¯¯ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯å‘ç»™æˆ‘ï¼Œæˆ‘å¸®ä½ æ’æŸ¥ ğŸ˜Š



## äºŒã€ç›®å½•ç»“æ„è§£æ

```
project_code/career/
â”œâ”€â”€ code/
â”‚   â”œâ”€â”€ app.py                    # ä¸»å…¥å£ï¼šFastAPI åº”ç”¨åˆå§‹åŒ–ã€è·¯ç”±æ³¨å†Œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ config.py            # é…ç½®åŠ è½½ï¼šä» config.yaml è¯»å– AIã€Redisã€åº”ç”¨é…ç½®
â”‚   â”‚   â””â”€â”€ loger.py             # æ—¥å¿—è®¾ç½®
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.yaml          # é…ç½®æ–‡ä»¶ï¼šAPI Keyã€Redisã€æ¨¡å‹åœ°å€ç­‰
â”‚   â”œâ”€â”€ routers/                 # è·¯ç”±å±‚ï¼šå®šä¹‰ HTTP æ¥å£
â”‚   â”‚   â”œâ”€â”€ virtual_position_router.py      # è™šæ‹Ÿå²—ä½ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ interview_process_router.py     # AI æ¨¡æ‹Ÿé¢è¯•
â”‚   â”‚   â”œâ”€â”€ interview_report_router.py      # é¢è¯•æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ resume_router.py                # ç®€å†ä¼˜åŒ–ï¼ˆåŸºç¡€+æ·±åº¦ï¼‰
â”‚   â”‚   â””â”€â”€ chat_router.py                  # ç®€å†å¯¹è¯ä¼˜åŒ–ï¼ˆæµå¼ï¼‰
â”‚   â”œâ”€â”€ service/                 # ä¸šåŠ¡é€»è¾‘å±‚ï¼šæ ¸å¿ƒç®—æ³•å®ç°
â”‚   â”‚   â”œâ”€â”€ virtual_interview.py            # é¢è¯•å¯¹è¯é€»è¾‘ï¼ˆCallInterview ç±»ï¼‰
â”‚   â”‚   â”œâ”€â”€ AIInterviewAssessor.py          # é¢è¯•æŠ¥å‘Šç”Ÿæˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ resumeBasicOptimize.py          # ç®€å†åŸºç¡€ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ resume_optimize.py              # ç®€å†æ·±åº¦ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ multimodal_report.py            # å¤šæ¨¡æ€æŠ¥å‘Šï¼ˆè§†é¢‘/éŸ³é¢‘åˆ†æï¼‰
â”‚   â”‚   â””â”€â”€ langchainRedisManager.py        # Redis ä¼šè¯ç®¡ç†ï¼ˆå¯¹è¯å†å²ã€é™æµï¼‰
â”‚   â”œâ”€â”€ sdk/                     # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ career/              # ä¸šåŠ¡ç›¸å…³ SDK
â”‚   â”‚   â”‚   â”œâ”€â”€ intent_prompt.py            # æ„å›¾è¯†åˆ«ï¼ˆç®€å†ä¼˜åŒ–å¯¹è¯ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ schema.py                   # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ auth_middleware.py          # é‰´æƒä¸­é—´ä»¶ï¼ˆtoken éªŒè¯ï¼‰
â”‚   â”‚   â”œâ”€â”€ limiter/
â”‚   â”‚   â”‚   â””â”€â”€ limiter.py                  # é™æµé…ç½®
â”‚   â”‚   â””â”€â”€ tts/                            # è¯­éŸ³åˆæˆï¼ˆTTSï¼‰
â”‚   â””â”€â”€ tools/                   # è¾…åŠ©å·¥å…·
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â”œâ”€â”€ Dockerfile                   # Docker éƒ¨ç½²é…ç½®
â””â”€â”€ main.py                      # ç®€å•ç¤ºä¾‹ï¼ˆå®é™…ä¸ä½¿ç”¨ï¼‰
```

---

## ä¸‰ã€6 ä¸ªæ ¸å¿ƒæ¥å£åŠä¸šåŠ¡æµç¨‹

### 1ï¸âƒ£ **è™šæ‹Ÿå²—ä½ç”Ÿæˆ** - `/jdFillingGenerate`

**æ–‡ä»¶**ï¼š`virtual_position_router.py`  
**åŠŸèƒ½**ï¼šæ ¹æ®ç”¨æˆ·ç”»åƒå’ŒæœŸæœ›èŒä½ï¼ŒAI ç”Ÿæˆè™šæ‹Ÿå…¬å¸ã€å²—ä½æè¿°ï¼ˆJDï¼‰  
**æµç¨‹**ï¼š
```
ç”¨æˆ·æäº¤ { jdParams, userPortrait }
   â†“
è°ƒç”¨å¤§æ¨¡å‹ï¼ˆQwenï¼‰ç”Ÿæˆè™šæ‹Ÿå…¬å¸ä¿¡æ¯
   â†“
è¿”å› { company, company_desc, responsibility, requirement }
```
**å…¸å‹åœºæ™¯**ï¼šæ±‚èŒè€…æƒ³ç»ƒä¹ é¢è¯•ï¼Œç³»ç»Ÿä¸ºå…¶åŒ¹é…ä¸€ä¸ªè™šæ‹Ÿå²—ä½

---

### 2ï¸âƒ£ **AI æ¨¡æ‹Ÿé¢è¯•** - `/virturlInterview`

**æ–‡ä»¶**ï¼š`interview_process_router.py` + `service/virtual_interview.py`  
**åŠŸèƒ½**ï¼šæµå¼è¿”å› AI é¢è¯•å®˜çš„å®æ—¶å¯¹è¯ï¼ˆæ”¯æŒå¤šè¯­è¨€ã€ç™½é¢†/è“é¢†æ¨¡å¼ï¼‰  
**æµç¨‹**ï¼š
```
å‰ç«¯å‘é€ { userPortrait, jdTitle, jdPortrait, interviewType, dialogHistory, id }
   â†“
CallInterview ç±»åˆå§‹åŒ–é¢è¯•ä¸Šä¸‹æ–‡
   â†“
è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆé¢è¯•å®˜å›å¤ï¼ˆä¸¤é˜¶æ®µï¼šå†³ç­– â†’ æ‰§è¡Œï¼‰
   â†“
æµå¼è¿”å›ï¼ˆSSEï¼‰â†’ å‰ç«¯è¯­éŸ³æ’­æ”¾
```
**å…³é”®ç‰¹æ€§**ï¼š
- æ”¯æŒ 9 ç§è¯­è¨€ï¼ˆä¸­/è‹±/æ—¥/éŸ©ç­‰ï¼‰
- ä¸¤ç§é¢è¯•ç±»å‹ï¼šç™½é¢†ï¼ˆä¸“ä¸šé—®ç­”ï¼‰ã€è“é¢†ï¼ˆç®€åŒ–æµç¨‹ï¼‰
- é¢è¯•å®˜ä¼šæ ¹æ®å¯¹è¯å†å²åŠ¨æ€è°ƒæ•´æé—®ç­–ç•¥
- ç»“æŸæ—¶ä¼šæç¤º"é¢è¯•åˆ°æ­¤ç»“æŸ"

---

### 3ï¸âƒ£ **é¢è¯•æŠ¥å‘Šç”Ÿæˆ** - `/interviewReport`

**æ–‡ä»¶**ï¼š`interview_report_router.py` + `service/AIInterviewAssessor.py`  
**åŠŸèƒ½**ï¼šé¢è¯•ç»“æŸåï¼Œå¼‚æ­¥ç”Ÿæˆç»¼åˆè¯„ä¼°æŠ¥å‘Š  
**æµç¨‹**ï¼š
```
å‰ç«¯æäº¤ { interview_id, transcript, jd, v_url/p_url, interview_language }
   â†“
åå°ä»»åŠ¡å¯åŠ¨ï¼ˆBackgroundTasksï¼‰
   â†“
æ­¥éª¤1ï¼šä» JD å’Œé¢è¯•è®°å½•ä¸­æå–èƒ½åŠ›è€ƒæ ¸ç»´åº¦ï¼ˆç¡¬æŠ€èƒ½/è½¯æŠ€èƒ½/æ–‡åŒ–åŒ¹é…ï¼‰
   â†“
æ­¥éª¤2ï¼šé€é¡¹è¯„ä¼°å€™é€‰äººåœ¨å„ç»´åº¦çš„è¡¨ç°ï¼ˆæ‰“åˆ† + åˆ†æï¼‰
   â†“
æ­¥éª¤3ï¼šè°ƒç”¨å¤šæ¨¡æ€åˆ†æï¼ˆè§†é¢‘/éŸ³é¢‘ï¼‰è¯„ä¼°éè¯­è¨€è¡¨ç°
   â†“
æ­¥éª¤4ï¼šç”Ÿæˆæ€»ç»“æŠ¥å‘Šï¼ˆæ€»åˆ†ã€å»ºè®®ã€ä¼˜ç¼ºç‚¹ï¼‰
   â†“
å›è°ƒåˆ°é…ç½®çš„ URLï¼ˆinterview_report_post_urlï¼‰
```
**å…³é”®é€»è¾‘**ï¼š
- èƒ½åŠ›ç»´åº¦è‡ªåŠ¨æŠ½å–ï¼ˆæœ€å¤š 10 ä¸ªç»†é¡¹ï¼‰
- æ¯é¡¹èƒ½åŠ›ç‹¬ç«‹è¯„åˆ†ï¼ˆ0-10ï¼‰
- æ”¯æŒè§†é¢‘/éŸ³é¢‘å¤šæ¨¡æ€åˆ†æ

---

### 4ï¸âƒ£ **ç®€å†åŸºç¡€ä¼˜åŒ–** - `/resumeBasicOptimize`

**æ–‡ä»¶**ï¼š`resume_router.py` + `service/resumeBasicOptimize.py`  
**åŠŸèƒ½**ï¼šå¯¹ç®€å†çš„æŸä¸€éƒ¨åˆ†ï¼ˆåŸºæœ¬ä¿¡æ¯/å·¥ä½œç»å†/é¡¹ç›®ç»å†ï¼‰è¿›è¡Œæ¶¦è‰²  
**æµç¨‹**ï¼š
```
ç”¨æˆ·æäº¤ { optimize_type, basic_info, work_experience, project_experience }
   â†“
æ ¹æ® optimize_type é€‰æ‹©ä¼˜åŒ–æ¨¡å—
   â†“
è°ƒç”¨å¤§æ¨¡å‹ä¼˜åŒ–å¯¹åº”éƒ¨åˆ†
   â†“
è¿”å›ä¼˜åŒ–åçš„æ–‡æœ¬
```

---

### 5ï¸âƒ£ **ç®€å†æ·±åº¦ä¼˜åŒ–** - `/resumeDeepOptimize`

**æ–‡ä»¶**ï¼š`resume_router.py` + `sdk/career/intent_prompt.py`  
**åŠŸèƒ½**ï¼šåŸºäºå¯¹è¯å†å²ï¼Œæ·±åº¦ä¼˜åŒ–ç®€å†ï¼ˆå¤šè½®äº¤äº’ï¼‰  
**æµç¨‹**ï¼š
```
ç”¨æˆ·æäº¤ { resume_info, dialogHistory }
   â†“
detect_intent è¯†åˆ«ç”¨æˆ·æ„å›¾
   â†“
è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆé’ˆå¯¹æ€§ä¼˜åŒ–å»ºè®®
   â†“
è¿”å›ä¼˜åŒ–ç»“æœ
```

---

### 6ï¸âƒ£ **ç®€å†å¯¹è¯ä¼˜åŒ–ï¼ˆæµå¼ï¼‰** - `/chat`

**æ–‡ä»¶**ï¼š`chat_router.py`  
**åŠŸèƒ½**ï¼šä¸ `/resumeDeepOptimize` ç±»ä¼¼ï¼Œä½†ä»¥ **SSE æµå¼** è¿”å›ï¼Œé€‚åˆå®æ—¶èŠå¤©åœºæ™¯  
**æµç¨‹**ï¼šä¸æ·±åº¦ä¼˜åŒ–ç›¸åŒï¼Œåªæ˜¯è¿”å›æ–¹å¼æ”¹ä¸ºæµå¼

---

## å››ã€æŠ€æœ¯æ ˆä¸ä¾èµ–

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| Web æ¡†æ¶ | FastAPI + Uvicorn |
| å¤§æ¨¡å‹è°ƒç”¨ | OpenAI SDKï¼ˆå…¼å®¹é˜¿é‡Œäº‘ DashScopeï¼‰ |
| ä¼šè¯ç®¡ç† | Redis + LangChain |
| é™æµ | SlowAPI |
| é‰´æƒ | è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼ˆToken + Redisï¼‰ |
| TTS | é˜¿é‡Œäº‘ DashScope TTS |
| æ—¥å¿— | Python logging |
| å¤šæ¨¡æ€åˆ†æ | è§†é¢‘/éŸ³é¢‘ URL åˆ†æ |

---

## äº”ã€æ ¸å¿ƒä¸šåŠ¡æµç¨‹å›¾

### **å®Œæ•´é¢è¯•æµç¨‹**
```
1. ç”¨æˆ·è¾“å…¥æœŸæœ›èŒä½ + ç”»åƒ
      â†“
2. è°ƒç”¨ /jdFillingGenerate ç”Ÿæˆè™šæ‹Ÿå²—ä½
      â†“
3. å‰ç«¯å‘èµ· /virturlInterview å¼€å§‹é¢è¯•
      â†“
4. ç”¨æˆ·ä¸ AI é¢è¯•å®˜å¤šè½®å¯¹è¯ï¼ˆSSE æµå¼ï¼‰
      â†“
5. é¢è¯•ç»“æŸåå‰ç«¯è°ƒç”¨ /interviewReport
      â†“
6. åå°å¼‚æ­¥ç”ŸæˆæŠ¥å‘Š â†’ å›è°ƒé€šçŸ¥å‰ç«¯
```

### **ç®€å†ä¼˜åŒ–æµç¨‹**
```
ç”¨æˆ·ä¸Šä¼ ç®€å†
   â†“
é€‰æ‹©ä¼˜åŒ–ç±»å‹ï¼š
   - å¿«é€Ÿä¼˜åŒ– â†’ /resumeBasicOptimize
   - æ·±åº¦å¯¹è¯ â†’ /resumeDeepOptimize æˆ– /chatï¼ˆæµå¼ï¼‰
   â†“
AI åˆ†æå¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®
```

---

## å…­ã€å…³é”®é…ç½®é¡¹ï¼ˆ`config.yaml`ï¼‰

```yaml
application:
  port: 9006                    # æœåŠ¡ç«¯å£
  auth: 1                       # æ˜¯å¦å¯ç”¨é‰´æƒ
  redis: "redis://..."          # Redis åœ°å€ï¼ˆä¼šè¯å­˜å‚¨ï¼‰
  redis_db: 9

ai:
  api_key: "sk-xxx"             # é˜¿é‡Œäº‘ DashScope Key
  api_model: "qwen-plus"        # æ¨¡å‹åç§°
  api_uri: "https://..."        # API åœ°å€

url:
  interview_report_post_url: "https://..."  # é¢è¯•æŠ¥å‘Šå›è°ƒåœ°å€
```

---

## ä¸ƒã€éƒ¨ç½²æ–¹å¼

### æœ¬åœ°è¿è¡Œ
```bash
cd project_code/career
conda activate career_env
python code/app.py
```

### Docker éƒ¨ç½²
```bash
docker build -t career-service .
docker run -d -p 9006:9006 career-service
```

---

## å…«ã€æ€»ç»“

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª **AI é©±åŠ¨çš„æ‹›è˜è¾…åŠ©å¹³å°åç«¯æœåŠ¡**ï¼Œæ ¸å¿ƒèƒ½åŠ›æ˜¯ï¼š
- ä¸ºæ±‚èŒè€…æä¾›è™šæ‹Ÿé¢è¯•ç»ƒä¹ ï¼ˆAI é¢è¯•å®˜ï¼‰
- è‡ªåŠ¨ç”Ÿæˆé¢è¯•è¯„ä¼°æŠ¥å‘Š
- å¸®åŠ©ä¼˜åŒ–ç®€å†å†…å®¹

æŠ€æœ¯ä¸Šé‡‡ç”¨ FastAPI + å¤§æ¨¡å‹ + Redis çš„å…¸å‹å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒæµå¼å“åº”ã€å¼‚æ­¥ä»»åŠ¡ã€å¤šè¯­è¨€ã€å¤šæ¨¡æ€åˆ†æç­‰ç‰¹æ€§ã€‚
