éå¸¸å¥½çš„é—®é¢˜ï¼ä½ æŠ“ä½äº†æ ¸å¿ƒå›°æƒ‘ç‚¹ã€‚è®©æˆ‘å¸®ä½ å½»åº•ç†æ¸…æ¥šï¼š

---

## ä¸€ã€è¿™ä¸¤ä¸ªæ¥å£åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ

### å…³é”®è¯¯åŒºæ¾„æ¸…ï¼š**ä¸æ˜¯ç›´æ¥ä¿®æ”¹ç®€å†ï¼**

è¿™ä¸¤ä¸ªæ¥å£å…¶å®æ˜¯ **å¯¹è¯å¼ç®€å†ä¼˜åŒ–åŠ©æ‰‹**ï¼Œè€Œä¸æ˜¯"ä¸€é”®ä¿®æ”¹ç®€å†"ã€‚

[1 tool called]

å¤ªå¥½äº†ï¼çœ‹å®Œè¿™ä¸ªä»£ç ï¼ŒçœŸç›¸å¤§ç™½äº†ã€‚è®©æˆ‘é‡æ–°æ¢³ç†ï¼š

---

## ä¸€ã€æ ¸å¿ƒçœŸç›¸ï¼šè¿™ä¸æ˜¯"å¯¹è¯å¼ä¼˜åŒ–"ï¼

### å®é™…æµç¨‹è§£æ

```
ç”¨æˆ·è°ƒç”¨ /chat æˆ– /resumeDeepOptimize
    â†“
1. detect_intent(resume_info, dialogHistory)
   â””â†’ æ„å›¾è¯†åˆ«ï¼šåˆ¤æ–­ç”¨æˆ·æƒ³å¹²ä»€ä¹ˆ
       â”œâ”€ resume_optimize â†’ èµ°ç®€å†ä¼˜åŒ–æµç¨‹
       â”œâ”€ generate_job â†’ èµ°å²—ä½ç”Ÿæˆï¼ˆæœªå®ç°ï¼‰
       â””â”€ chat â†’ æ™®é€šé—²èŠï¼ˆè°ƒç”¨é€šç”¨LLMï¼‰
    â†“
2. å¦‚æœæ˜¯ resume_optimizeï¼š
   â””â†’ resume_optimize_action(user_input)
       â”œâ”€ ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­ä¿¡æ¯æ˜¯å¦å……è¶³
       â”‚   â””â†’ å¦‚æœä¸è¶³ï¼šè¿”å›è¿½é—®ï¼ˆ"è¯·é—®æ‚¨å¸Œæœ›ç”³è¯·ä»€ä¹ˆå²—ä½ï¼Ÿ"ï¼‰
       â”‚   â””â†’ å¦‚æœå……è¶³ï¼šç»§ç»­
       â”‚
       â”œâ”€ ç¬¬äºŒæ­¥ï¼šè°ƒç”¨ ResumeBasicOptimize é€å—ä¼˜åŒ–
       â”‚   â”œâ”€ ä¼˜åŒ–åŸºæœ¬ä¿¡æ¯ â†’ å®Œæˆåç«‹å³æ¨é€
       â”‚   â”œâ”€ ä¼˜åŒ–å·¥ä½œç»å† â†’ å®Œæˆåç«‹å³æ¨é€
       â”‚   â””â”€ ä¼˜åŒ–é¡¹ç›®ç»å† â†’ å®Œæˆåç«‹å³æ¨é€
       â”‚
       â””â”€ ç¬¬ä¸‰æ­¥ï¼šå‘é€ [DONE] ç»“æŸ
```

---

## äºŒã€æµå¼çš„çœŸæ­£å«ä¹‰ï¼ˆå…³é”®ï¼ï¼‰

### **æµå¼ä¸æ˜¯æŒ‡"é€å­—è¾“å‡ºå»ºè®®"ï¼Œè€Œæ˜¯"é€æ¨¡å—æ¨é€ç»“æœ"ï¼**

çœ‹ä»£ç ç¬¬ 122-134 è¡Œï¼š

```python
# é€ä¸ªæ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªå°±æ¨é€ä¸€ä¸ª
for coro_func, section_type in tasks:
    result = await coro_func()  # ç­‰å¾…æŸä¸€æ¨¡å—ä¼˜åŒ–å®Œæˆ
    # æ¨é€è¿™ä¸€éƒ¨åˆ†çš„ä¼˜åŒ–ç»“æœ
    yield f"data: {json.dumps({'type': section_type, 'content': result}, ...)}\n\n"
```

**å®é™…æµå¼è¿‡ç¨‹**ï¼š

```
æ—¶é—´ 0s:   ç”¨æˆ·æäº¤ç®€å†
æ—¶é—´ 1s:   è¿”å› heartbeat: "å¤„ç†ç¬¬äºŒæ­¥è¯·æ±‚"
æ—¶é—´ 8s:   åŸºæœ¬ä¿¡æ¯ä¼˜åŒ–å®Œæˆ â†’ ç«‹å³æ¨é€ {"type": "basic", "content": {...}}
æ—¶é—´ 15s:  å·¥ä½œç»å†ä¼˜åŒ–å®Œæˆ â†’ ç«‹å³æ¨é€ {"type": "work", "content": [{...}]}
æ—¶é—´ 22s:  é¡¹ç›®ç»å†ä¼˜åŒ–å®Œæˆ â†’ ç«‹å³æ¨é€ {"type": "project", "content": [{...}]}
æ—¶é—´ 22s:  æ¨é€ {"type": "DONE"}
```

**ä¸æ˜¯è¿™æ ·**ï¼š
```
âŒ é”™è¯¯ç†è§£ï¼š
"æ‚¨" â†’ "çš„" â†’ "ç®€" â†’ "å†" â†’ "å»º" â†’ "è®®" â†’ "ä¿®" â†’ "æ”¹"
```

**æ˜¯è¿™æ ·**ï¼š
```
âœ… æ­£ç¡®ç†è§£ï¼š
[æ•´å—1: åŸºæœ¬ä¿¡æ¯ä¼˜åŒ–ç»“æœ] â†’ 
[æ•´å—2: å·¥ä½œç»å†ä¼˜åŒ–ç»“æœ] â†’ 
[æ•´å—3: é¡¹ç›®ç»å†ä¼˜åŒ–ç»“æœ]
```

---

## ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨"æµå¼"ï¼Ÿ

### å› ä¸ºä¼˜åŒ–ç®€å†æ˜¯ä¸ª**è€—æ—¶ä»»åŠ¡**ï¼

- ä¼˜åŒ–åŸºæœ¬ä¿¡æ¯ï¼šè°ƒç”¨ LLMï¼Œå¯èƒ½éœ€è¦ 5-8 ç§’
- ä¼˜åŒ–å·¥ä½œç»å†ï¼šè°ƒç”¨ LLMï¼Œå¯èƒ½éœ€è¦ 7-10 ç§’
- ä¼˜åŒ–é¡¹ç›®ç»å†ï¼šè°ƒç”¨ LLMï¼Œå¯èƒ½éœ€è¦ 7-10 ç§’

**å¦‚æœä¸€æ¬¡æ€§è¿”å›**ï¼š
```
ç”¨æˆ·æäº¤ â†’ ç­‰å¾… 22 ç§’ï¼ˆç™½å±ï¼‰â†’ ä¸€æ¬¡æ€§æ˜¾ç¤ºå…¨éƒ¨ç»“æœ
```
ç”¨æˆ·ä½“éªŒæå·®ï¼

**å¦‚æœæµå¼è¿”å›**ï¼š
```
ç”¨æˆ·æäº¤ 
  â†’ 8ç§’åçœ‹åˆ°"åŸºæœ¬ä¿¡æ¯ä¼˜åŒ–å®Œæˆï¼"
  â†’ 15ç§’åçœ‹åˆ°"å·¥ä½œç»å†ä¼˜åŒ–å®Œæˆï¼"
  â†’ 22ç§’åçœ‹åˆ°"é¡¹ç›®ç»å†ä¼˜åŒ–å®Œæˆï¼"
```
ç”¨æˆ·æ„Ÿè§‰æœ‰è¿›åº¦ï¼Œä¸ä¼šç„¦è™‘ï¼

---

## å››ã€ä½ çš„å…·ä½“é—®é¢˜è§£ç­”

### Q1: "ç›´æ¥å¯¹ç®€å†è¿›è¡Œä¿®æ”¹ï¼Œæ˜¯å—ï¼Ÿ"

**A**: æ˜¯çš„ï¼Œä½†ä¸æ˜¯å®æ—¶ç¼–è¾‘ï¼Œè€Œæ˜¯**ç”Ÿæˆä¼˜åŒ–åçš„ç‰ˆæœ¬**ã€‚

æµç¨‹ï¼š
1. ç”¨æˆ·ä¸Šä¼ åŸå§‹ç®€å†ï¼ˆJSON æ ¼å¼ï¼‰
2. åç«¯è°ƒç”¨ LLM å¯¹æ¯ä¸ªæ¨¡å—é‡æ–°ç”Ÿæˆä¼˜åŒ–ç‰ˆ
3. è¿”å›ä¼˜åŒ–åçš„ç®€å†ï¼ˆæ–°çš„ JSONï¼‰
4. ç”¨æˆ·å¯¹æ¯”åŸç‰ˆå’Œä¼˜åŒ–ç‰ˆï¼Œå†³å®šæ˜¯å¦é‡‡çº³

---

### Q2: "ä¸åº”è¯¥ç­‰å¯¹è¯å®Œæˆä¹‹åå†ä¼˜åŒ–å—ï¼Ÿ"

**A**: ä½ è¯´å¾—å¯¹ï¼ä½†è¿™é‡Œçš„"å¯¹è¯"ä¸æ˜¯å¤šè½®é—®ç­”ã€‚

**å®é™…æµç¨‹**ï¼š
- **æƒ…å†µ1**ï¼šç”¨æˆ·ç›´æ¥ä¸Šä¼ å®Œæ•´ç®€å† â†’ ä¸€æ¬¡æ€§ä¼˜åŒ– â†’ è¿”å›ç»“æœ
- **æƒ…å†µ2**ï¼šç”¨æˆ·åªè¯´"å¸®æˆ‘ä¼˜åŒ–ç®€å†" â†’ ç³»ç»Ÿè¿½é—®"æ‚¨æƒ³ç”³è¯·ä»€ä¹ˆå²—ä½ï¼Ÿ" â†’ ç”¨æˆ·è¡¥å……ä¿¡æ¯ â†’ å†ä¼˜åŒ–

**ä¸æ˜¯ä¼ ç»Ÿå¯¹è¯**ï¼š
```
âŒ é”™è¯¯æƒ³è±¡ï¼š
ç”¨æˆ·ï¼šå¸®æˆ‘ä¼˜åŒ–å·¥ä½œç»å†
AIï¼š  æ‚¨æƒ³çªå‡ºä»€ä¹ˆï¼Ÿ
ç”¨æˆ·ï¼šçªå‡ºæŠ€æœ¯èƒ½åŠ›
AIï¼š  æ‚¨ç”¨è¿‡ä»€ä¹ˆæŠ€æœ¯ï¼Ÿ
ç”¨æˆ·ï¼šPythonã€Django
AIï¼š  å¥½çš„ï¼Œå»ºè®®æ”¹æˆ...
```

**å®é™…æ˜¯**ï¼š
```
âœ… å®é™…æµç¨‹ï¼š
ç”¨æˆ·ï¼šï¼ˆä¸Šä¼ å®Œæ•´ç®€å†JSON + è¯´æ˜"ä¼˜åŒ–å·¥ä½œç»å†"ï¼‰
AIï¼š  ï¼ˆç›´æ¥è°ƒç”¨LLMé‡å†™å·¥ä½œç»å†ï¼‰ â†’ è¿”å›ä¼˜åŒ–ç‰ˆ
```

---

### Q3: "æµå¼æ˜¯ LLM é€å­—è¾“å‡ºè¿˜æ˜¯é€å­—ä¿®æ”¹ï¼Ÿ"

**A**: éƒ½ä¸æ˜¯ï¼**æ˜¯é€æ¨¡å—æ¨é€**ã€‚

ä»£ç é‡Œçš„æµå¼ä½“ç°åœ¨ï¼š

```python
# ç¬¬1æ¬¡ yieldï¼šåŸºæœ¬ä¿¡æ¯ä¼˜åŒ–å®Œæˆ
yield f"data: {json.dumps({'type': 'basic', 'content': ä¼˜åŒ–åçš„åŸºæœ¬ä¿¡æ¯}, ...)}\n\n"

# ç¬¬2æ¬¡ yieldï¼šå·¥ä½œç»å†ä¼˜åŒ–å®Œæˆ
yield f"data: {json.dumps({'type': 'work', 'content': ä¼˜åŒ–åçš„å·¥ä½œç»å†}, ...)}\n\n"

# ç¬¬3æ¬¡ yieldï¼šé¡¹ç›®ç»å†ä¼˜åŒ–å®Œæˆ
yield f"data: {json.dumps({'type': 'project', 'content': ä¼˜åŒ–åçš„é¡¹ç›®ç»å†}, ...)}\n\n"
```

æ¯ä¸ª `yield` æ¨é€çš„éƒ½æ˜¯**å®Œæ•´çš„æŸä¸€å—å†…å®¹**ï¼Œä¸æ˜¯é€å­—ã€‚

---

## äº”ã€å®Œæ•´ç¤ºä¾‹å¯¹æ¯”

### åœºæ™¯ï¼šç”¨æˆ·æäº¤ç®€å†ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€å·¥ä½œç»å†ã€é¡¹ç›®ç»å†

#### `/resumeDeepOptimize`ï¼ˆä¸€æ¬¡æ€§ï¼‰

**ç”¨æˆ·è¯·æ±‚**ï¼š
```json
POST /resumeDeepOptimize
{
  "resume_info": {
    "basic_info": {...},
    "work_experience": [...],
    "project_experience": [...]
  },
  "dialogHistory": []
}
```

**åç«¯å¤„ç†**ï¼š
```
[ç­‰å¾… 22 ç§’ï¼Œä¼˜åŒ–å…¨éƒ¨å®Œæˆ]
```

**è¿”å›ç»“æœ**ï¼ˆä¸€æ¬¡æ€§ï¼‰ï¼š
```json
{
  "satisfy": true,
  "content": {
    "basic_info": {ä¼˜åŒ–åçš„åŸºæœ¬ä¿¡æ¯},
    "work_experience": [{ä¼˜åŒ–åçš„å·¥ä½œ1}, {ä¼˜åŒ–åçš„å·¥ä½œ2}],
    "project_experience": [{ä¼˜åŒ–åçš„é¡¹ç›®1}, {ä¼˜åŒ–åçš„é¡¹ç›®2}]
  }
}
```

---

#### `/chat`ï¼ˆæµå¼ï¼‰

**ç”¨æˆ·è¯·æ±‚**ï¼š
```json
POST /chat
{
  "resume_info": {...},
  "dialogHistory": []
}
```

**åç«¯å¤„ç† + æ¨é€**ï¼š

```
æ—¶é—´ 0s:
data: {"type": "heartbeat", "content": "æ¥æ”¶è¯·æ±‚"}

æ—¶é—´ 1s:
data: {"type": "heartbeat", "content": "å¤„ç†ç¬¬ä¸€æ­¥è¯·æ±‚"}

æ—¶é—´ 2s:
data: {"type": "heartbeat", "content": "å¤„ç†ç¬¬äºŒæ­¥è¯·æ±‚"}

æ—¶é—´ 8s:
data: {"type": "basic", "content": {ä¼˜åŒ–åçš„åŸºæœ¬ä¿¡æ¯}}

æ—¶é—´ 15s:
data: {"type": "work", "content": [{ä¼˜åŒ–åçš„å·¥ä½œ1}, {ä¼˜åŒ–åçš„å·¥ä½œ2}]}

æ—¶é—´ 22s:
data: {"type": "project", "content": [{ä¼˜åŒ–åçš„é¡¹ç›®1}, {ä¼˜åŒ–åçš„é¡¹ç›®2}]}

æ—¶é—´ 22s:
data: {"type": "DONE", "content": "[DONE]"}
```

---

## å…­ã€æ€»ç»“æ ¸å¿ƒè¦ç‚¹

| ç»´åº¦ | è¯´æ˜ |
|------|------|
| **è¿™ä¸æ˜¯å¤šè½®å¯¹è¯** | ç”¨æˆ·ä¸€æ¬¡æ€§æäº¤ç®€å†ï¼ŒAI ç›´æ¥ä¼˜åŒ–ï¼Œä¸æ˜¯èŠå¤©å¼é€æ­¥å¼•å¯¼ |
| **æµå¼ â‰  é€å­—** | æµå¼æ˜¯æŒ‡"é€æ¨¡å—æ¨é€å®Œæ•´ç»“æœ"ï¼Œä¸æ˜¯"é€å­—æ˜¾ç¤ºæ–‡å­—" |
| **ä¸ºä»€ä¹ˆæµå¼** | ä¼˜åŒ–è€—æ—¶é•¿ï¼ˆ20ç§’+ï¼‰ï¼Œæµå¼æ¨é€è®©ç”¨æˆ·çœ‹åˆ°è¿›åº¦ |
| **ä¸€æ¬¡æ€§ vs æµå¼** | ä¸€æ¬¡æ€§ç­‰å…¨éƒ¨å®Œæˆå†è¿”å›ï¼›æµå¼å®Œæˆä¸€å—æ¨ä¸€å— |
| **heartbeat ä½œç”¨** | å‘Šè¯‰å‰ç«¯"æˆ‘è¿˜æ´»ç€ï¼Œåˆ«æ–­è¿æ¥"ï¼Œå°¤å…¶æ˜¯é•¿æ—¶é—´æ— è¾“å‡ºæ—¶ |

---

å¸Œæœ›è¿™æ¬¡å½»åº•è®²æ¸…æ¥šäº†ï¼ç®€å•è¯´å°±æ˜¯ï¼š**è¿™æ˜¯ä¸€ä¸ª"åˆ†å—ä¼˜åŒ– + æµå¼æ¨é€"çš„ç³»ç»Ÿï¼Œä¸æ˜¯é€å­—è¾“å‡ºï¼Œä¹Ÿä¸æ˜¯å¤šè½®å¯¹è¯**ã€‚ğŸ˜Š


éå¸¸å¥½çš„é—®é¢˜ï¼æˆ‘æ¥é€ä¸€è¯¦ç»†è§£ç­”ï¼Œå¸®ä½ å½»åº•ç†è§£ã€‚

---

## ä¸€ã€æ„å›¾è¯†åˆ«çš„å®ç°åŸç†

### ä»£ç è§£æ

```python
async def detect_intent(user_input: str, desc: str) -> dict:
    prompt = f"""
è¯·æ ¹æ®ç”¨æˆ·å¯¹è¯ä¿¡æ¯åˆ¤æ–­ç”¨æˆ·æ„å›¾ï¼Œå¹¶ä»¥ **ä¸¥æ ¼ JSON æ ¼å¼** è¿”å›ç»“æœã€‚

å¯é€‰æ„å›¾ï¼š
- resume_optimize: ç”¨æˆ·å¸Œæœ›ä¼˜åŒ–ç®€å†
- generate_job: ç”¨æˆ·å¸Œæœ›ç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå²—ä½
- chat: é—²èŠæˆ–ä¿¡æ¯ä¸è¶³

###ç”¨æˆ·å¯¹è¯
{desc}
å…¶ä»–èµ„æ–™
{user_input}

### è¾“å‡ºjsonæ ¼å¼ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰ï¼š
{{
  "intent": "resume_optimize",
  "confidence": 0.95,
  "reason": "ç®€è¦è§£é‡Šåˆ¤æ–­ä¾æ®"
}}
"""
    # è°ƒç”¨å¤§æ¨¡å‹
    response = llm.chat.completions.create(
        model=comet_config['api_model'],
        response_format={"type": "json_object"},  # å¼ºåˆ¶è¿”å›JSON
        messages=[
            {"role": "system", "content": "ä½ æ˜¯ä¸€ä¸ªæ„å›¾åˆ†ç±»å™¨ï¼Œè¯·ä¸¥æ ¼æŒ‰æ ¼å¼è¾“å‡ºã€‚"},
            {"role": "user", "content": prompt}
        ]
    )
    result = json.loads(response.choices[0].message.content)
    # å¾—åˆ° {"intent": "resume_optimize", "confidence": 0.95, ...}
```

### ä½ çš„ç†è§£æ˜¯å¯¹çš„ï¼

**æ˜¯çš„ï¼Œè¿™å°±æ˜¯åˆ©ç”¨å¤§æ¨¡å‹çš„ç†è§£èƒ½åŠ›åšåˆ†ç±»**ï¼š

1. **é¢„å®šä¹‰ 3 ç§æ„å›¾**ï¼š`resume_optimize`ã€`generate_job`ã€`chat`
2. **é€šè¿‡ Prompt Engineering**ï¼šæ˜ç¡®å‘Šè¯‰æ¨¡å‹"åªèƒ½ä»è¿™ 3 ä¸ªé‡Œé€‰"
3. **å¼ºåˆ¶ JSON è¾“å‡º**ï¼š`response_format={"type": "json_object"}` ç¡®ä¿ç»“æ„åŒ–è¿”å›
4. **è§£æç»“æœ**ï¼šç›´æ¥è¯»å– `intent` å­—æ®µï¼Œè·¯ç”±åˆ°å¯¹åº”é€»è¾‘

### ä¸ºä»€ä¹ˆè¯´"æ²¡å•¥æŠ€æœ¯å«é‡"ï¼Ÿ

ä½ è¯´å¾—å¯¹ï¼Œè¿™ç¡®å®ä¸æ˜¯å¤æ‚ç®—æ³•ï¼Œä½†è¿™æ˜¯ **ç°ä»£ LLM åº”ç”¨çš„æ ‡å‡†åšæ³•**ï¼š

- **ä¼ ç»Ÿæ–¹å¼**ï¼šéœ€è¦è®­ç»ƒä¸“é—¨çš„æ„å›¾åˆ†ç±»æ¨¡å‹ï¼ˆBERTã€TextCNN ç­‰ï¼‰ï¼Œæ ‡æ³¨å¤§é‡æ•°æ®
- **LLM æ–¹å¼**ï¼šåˆ©ç”¨å¤§æ¨¡å‹çš„é›¶æ ·æœ¬å­¦ä¹ èƒ½åŠ›ï¼Œç›´æ¥é€šè¿‡ Prompt å®ç°åˆ†ç±»

**ä¼˜ç‚¹**ï¼š
- å¼€å‘å¿«ï¼Œä¸éœ€è¦è®­ç»ƒæ¨¡å‹
- çµæ´»ï¼Œæ”¹æ„å›¾ç±»åˆ«åªéœ€æ”¹ Prompt
- å‡†ç¡®ç‡é«˜ï¼ˆä¾èµ–å¤§æ¨¡å‹èƒ½åŠ›ï¼‰

**ç¼ºç‚¹**ï¼š
- ä¾èµ–å¤–éƒ¨ APIï¼Œæœ‰å»¶è¿Ÿ
- æˆæœ¬ç›¸å¯¹é«˜ï¼ˆæ¯æ¬¡è°ƒç”¨éƒ½è®¡è´¹ï¼‰
- æ„å›¾ç±»åˆ«ä¸èƒ½å¤ªå¤šï¼ˆå¤ªå¤šä¼šæ··æ·†ï¼‰

---

## äºŒã€ä¸€æ¬¡æ€§ vs æµå¼çš„åŒºåˆ«ï¼ˆé‡ç‚¹ï¼ï¼‰

è¿™æ˜¯ä½ æœ€å›°æƒ‘çš„åœ°æ–¹ï¼Œæˆ‘ç”¨é€šä¿—çš„ä¾‹å­è§£é‡Šï¼š

### æ¯”å–»ï¼šé—® AI "åŒ—äº¬æœ‰ä»€ä¹ˆå¥½ç©çš„åœ°æ–¹ï¼Ÿ"

#### ğŸ“¦ ä¸€æ¬¡æ€§è¿”å›ï¼ˆ`/resumeDeepOptimize`ï¼‰
```
ä½ ï¼šåŒ—äº¬æœ‰ä»€ä¹ˆå¥½ç©çš„ï¼Ÿ
[ç­‰å¾… 5 ç§’...]
AIï¼šåŒ—äº¬æœ‰æ•…å®«ã€é•¿åŸã€å¤©å›ã€é¢å’Œå›­ã€é¸Ÿå·¢ã€æ°´ç«‹æ–¹ç­‰æ™¯ç‚¹ã€‚æ•…å®«æ˜¯æ˜æ¸…çš‡å®«...ï¼ˆä¸€å¤§æ®µè¯ï¼‰
```
**ç‰¹ç‚¹**ï¼šAI åœ¨åå°å…¨éƒ¨ç”Ÿæˆå®Œï¼Œä¸€æ¬¡æ€§è¿”å›æ•´æ®µæ–‡æœ¬

---

#### ğŸ’¬ æµå¼è¿”å›ï¼ˆ`/chat`ï¼‰
```
ä½ ï¼šåŒ—äº¬æœ‰ä»€ä¹ˆå¥½ç©çš„ï¼Ÿ
AIï¼šåŒ—â–Œ
AIï¼šåŒ—äº¬â–Œ
AIï¼šåŒ—äº¬æœ‰â–Œ
AIï¼šåŒ—äº¬æœ‰æ•…â–Œ
AIï¼šåŒ—äº¬æœ‰æ•…å®«â–Œ
AIï¼šåŒ—äº¬æœ‰æ•…å®«ã€â–Œ
AIï¼šåŒ—äº¬æœ‰æ•…å®«ã€é•¿â–Œ
...ï¼ˆé€å­—æ˜¾ç¤ºï¼Œåƒæ‰“å­—æœºï¼‰
```
**ç‰¹ç‚¹**ï¼šAI æ¯ç”Ÿæˆä¸€ä¸ª tokenï¼ˆè¯å—ï¼‰ï¼Œç«‹å³å‘é€ç»™ä½ 

---

### æŠ€æœ¯å±‚é¢çš„åŒºåˆ«

#### ä¸€æ¬¡æ€§è¿”å›çš„ä»£ç é€»è¾‘
```python
# /resumeDeepOptimize
async def resumeDeepOptimize(request: Request):
    json_data = await request.json()
    result = await detect_intent(...)  # ç­‰å¾…å…¨éƒ¨å®Œæˆ
    return result  # ä¸€æ¬¡æ€§è¿”å›å®Œæ•´JSON
```

**æ•°æ®æµ**ï¼š
```
å‰ç«¯è¯·æ±‚ â†’ åç«¯æ”¶åˆ° â†’ è°ƒç”¨LLM â†’ ç­‰å¾…å…¨éƒ¨ç”Ÿæˆ â†’ è¿”å›å®Œæ•´ç»“æœ â†’ å‰ç«¯æ˜¾ç¤º
        [------------ ç”¨æˆ·ç­‰å¾… 5-30ç§’ ------------]  ä¸€æ¬¡æ€§æ˜¾ç¤º
```

---

#### æµå¼è¿”å›çš„ä»£ç é€»è¾‘
```python
# /chat
async def chat(request: Request):
    json_data = await request.json()
    headers = {
        "Content-Type": "text/event-stream; charset=utf-8",
        "Cache-Control": "no-cache",
        "Connection": "keep-alive",
    }
    # æ³¨æ„ï¼šè¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨
    return StreamingResponse(
        detect_intent(...),  # è¿™æ˜¯ä¸€ä¸ª async generator
        media_type='text/event-stream',
        headers=headers
    )
```

**æ•°æ®æµ**ï¼š
```
å‰ç«¯è¯·æ±‚ â†’ åç«¯æ”¶åˆ° â†’ è°ƒç”¨LLM
                    â†“ ç”Ÿæˆç¬¬1ä¸ªtoken â†’ ç«‹å³å‘é€ â†’ å‰ç«¯æ˜¾ç¤º"åŒ—"
                    â†“ ç”Ÿæˆç¬¬2ä¸ªtoken â†’ ç«‹å³å‘é€ â†’ å‰ç«¯æ˜¾ç¤º"äº¬"
                    â†“ ç”Ÿæˆç¬¬3ä¸ªtoken â†’ ç«‹å³å‘é€ â†’ å‰ç«¯æ˜¾ç¤º"æœ‰"
                    ... (æŒç»­æ¨æµ)
                    â†“ ç”Ÿæˆå®Œæˆ â†’ å‘é€ [DONE] â†’ å‰ç«¯åœæ­¢æ¥æ”¶
```

---

### å®é™…æ•°æ®æ ¼å¼å¯¹æ¯”

#### `/resumeDeepOptimize` è¿”å›çš„å®Œæ•´ JSONï¼ˆå‡è®¾ï¼‰
```json
{
  "type": "success",
  "content": "æ ¹æ®æ‚¨çš„ç®€å†åˆ†æï¼Œå»ºè®®ä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ä¼˜åŒ–ï¼š\n1. å·¥ä½œç»å†éƒ¨åˆ†å¯ä»¥é‡åŒ–æˆæœ...\n2. é¡¹ç›®ç»å†éœ€è¦çªå‡ºæŠ€æœ¯äº®ç‚¹...\n3. æŠ€èƒ½æ¸…å•å»ºè®®è¡¥å……..."
}
```
å‰ç«¯ä¸€æ¬¡æ€§æ”¶åˆ°è¿™æ•´ä¸ªå¯¹è±¡ã€‚

---

#### `/chat` è¿”å›çš„ SSE æµï¼ˆå®é™…ä¼ è¾“ï¼‰
```
data: {"type": "heartbeat", "content": "æ¥æ”¶è¯·æ±‚"}

data: {"type": "heartbeat", "content": "å¤„ç†ç¬¬ä¸€æ­¥è¯·æ±‚"}

data: {"type": "chunk", "content": "æ ¹"}

data: {"type": "chunk", "content": "æ®"}

data: {"type": "chunk", "content": "æ‚¨"}

data: {"type": "chunk", "content": "çš„"}

data: {"type": "chunk", "content": "ç®€"}

data: {"type": "chunk", "content": "å†"}

data: {"type": "chunk", "content": "åˆ†"}

data: {"type": "chunk", "content": "æ"}

...

data: {"type": "DONE", "content": "[DONE]"}
```

å‰ç«¯éœ€è¦é€æ¡æ¥æ”¶ï¼Œæ‹¼æ¥æˆå®Œæ•´æ–‡æœ¬ã€‚

---

## ä¸‰ã€ä½ çš„å‡ ä¸ªå…·ä½“é—®é¢˜

### Q1: "ä¸€æ¬¡æ€§"æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ
**A**: æŒ‡çš„æ˜¯ **LLM å•æ¬¡çš„å®Œæ•´å“åº”**ï¼Œä¸æ˜¯å¯¹è¯å†å²ã€‚

- `/resumeDeepOptimize` è°ƒç”¨ä¸€æ¬¡ï¼Œç­‰ LLM ç”Ÿæˆå®Œå…¨éƒ¨å†…å®¹ï¼ˆå¯èƒ½ 500 å­—ï¼‰ï¼Œç„¶åä¸€æ¬¡æ€§è¿”å›è¿™ 500 å­—
- **ä¸æ˜¯**æŒ‡"æ‰€æœ‰å†å²å¯¹è¯"ï¼Œè€Œæ˜¯"è¿™æ¬¡è¯·æ±‚çš„å®Œæ•´å›å¤"

---

### Q2: "æµå¼"æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ
**A**: æ˜¯çš„ï¼Œ**æŒ‡å•ä¸ª token é€ä¸ªè¿”å›**ã€‚

- LLM å†…éƒ¨æ˜¯é€ token ç”Ÿæˆçš„ï¼ˆåƒ"åŒ—" â†’ "äº¬" â†’ "æœ‰" â†’ "æ•…" â†’ "å®«"ï¼‰
- æµå¼æ¨¡å¼ä¸‹ï¼Œæ¯ç”Ÿæˆä¸€ä¸ª token å°±å‘é€ä¸€æ¬¡
- éæµå¼æ¨¡å¼ä¸‹ï¼Œç­‰æ‰€æœ‰ token ç”Ÿæˆå®Œå†ä¸€æ¬¡æ€§å‘é€

**Token æ˜¯ä»€ä¹ˆï¼Ÿ**  
ä¸­æ–‡å¤§çº¦ 1-2 ä¸ªå­—ä¸€ä¸ª tokenï¼Œè‹±æ–‡å¤§çº¦ 3-4 ä¸ªå­—æ¯ä¸€ä¸ª tokenã€‚

---

### Q3: `heartbeat` æ˜¯ä»€ä¹ˆï¼Ÿä¸æµå¼çš„åŒºåˆ«ï¼Ÿ
**A**: `heartbeat` æ˜¯ **ä¿æ´»æ¶ˆæ¯**ï¼Œé˜²æ­¢è¿æ¥è¶…æ—¶ã€‚

```python
yield f"data: {json.dumps({'type': 'heartbeat', 'content': 'æ¥æ”¶è¯·æ±‚'}, ...)}\n\n"
```

**ä½œç”¨**ï¼š
- **å‘Šè¯‰å‰ç«¯**ï¼š"æˆ‘è¿˜æ´»ç€ï¼Œæ­£åœ¨å¤„ç†ï¼Œåˆ«æ–­å¼€è¿æ¥"
- **é˜²æ­¢è¶…æ—¶**ï¼šæŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœé•¿æ—¶é—´ä¸å‘æ•°æ®ï¼Œè¿æ¥ä¼šè¢«ä¸­æ–­

**ä¸æµå¼çš„å…³ç³»**ï¼š
- `heartbeat` æ˜¯**çŠ¶æ€æ¶ˆæ¯**ï¼ˆ"æ­£åœ¨å¤„ç†"ã€"ç¬¬ä¸€æ­¥å®Œæˆ"ï¼‰
- `chunk` æ‰æ˜¯**å®é™…å†…å®¹**ï¼ˆ"æ ¹æ®æ‚¨çš„ç®€å†..."ï¼‰
- éƒ½æ˜¯æµå¼ä¼ è¾“ï¼Œä½†ç±»å‹ä¸åŒ

**å®Œæ•´æµç¨‹**ï¼š
```
1. heartbeat: "æ¥æ”¶è¯·æ±‚"       â† å‘ŠçŸ¥å¼€å§‹
2. heartbeat: "å¤„ç†ç¬¬ä¸€æ­¥"     â† æ„å›¾è¯†åˆ«ä¸­
3. chunk: "æ ¹"                 â† å¼€å§‹è¿”å›å†…å®¹
4. chunk: "æ®"                 â† ç»§ç»­
5. chunk: "æ‚¨"                 â† ç»§ç»­
...
N. DONE: "[DONE]"              â† ç»“æŸæ ‡è®°
```

---

## å››ã€å‰ç«¯å¦‚ä½•æ¥æ”¶ï¼Ÿ

### æ¥æ”¶ä¸€æ¬¡æ€§å“åº”ï¼ˆ`/resumeDeepOptimize`ï¼‰
```javascript
const response = await fetch('/resumeDeepOptimize', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ resume_info, dialogHistory })
});

const result = await response.json();
console.log(result.content); // å®Œæ•´å†…å®¹ä¸€æ¬¡æ€§æ˜¾ç¤º
document.getElementById('output').innerText = result.content;
```

---

### æ¥æ”¶æµå¼å“åº”ï¼ˆ`/chat`ï¼‰
```javascript
const response = await fetch('/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ resume_info, dialogHistory })
});

const reader = response.body.getReader();
const decoder = new TextDecoder();
let displayText = '';

while (true) {
  const { done, value } = await reader.read();
  if (done) break;
  
  const chunk = decoder.decode(value);
  const lines = chunk.split('\n');
  
  for (const line of lines) {
    if (line.startsWith('data: ')) {
      const data = JSON.parse(line.slice(6));
      
      if (data.type === 'heartbeat') {
        console.log('çŠ¶æ€:', data.content);
      } else if (data.type === 'chunk') {
        displayText += data.content; // é€å­—è¿½åŠ 
        document.getElementById('output').innerText = displayText;
      } else if (data.type === 'DONE') {
        console.log('ç”Ÿæˆå®Œæˆ');
        break;
      }
    }
  }
}
```

---

## äº”ã€æ€»ç»“å¯¹æ¯”è¡¨

| ç»´åº¦ | `/resumeDeepOptimize` | `/chat` |
|------|---------------------|---------|
| è¿”å›æ–¹å¼ | æ™®é€š HTTP å“åº” | SSEï¼ˆServer-Sent Eventsï¼‰ |
| å‰ç«¯ç­‰å¾… | å…¨éƒ¨ç”Ÿæˆå®Œæ‰è¿”å›ï¼ˆ5-30ç§’ç™½å±ï¼‰ | è¾¹ç”Ÿæˆè¾¹æ˜¾ç¤ºï¼ˆ1ç§’å†…å¼€å§‹æ˜¾ç¤ºï¼‰ |
| ç”¨æˆ·ä½“éªŒ | æ„Ÿè§‰æ…¢ï¼Œä½†å®ç°ç®€å• | æ„Ÿè§‰å¿«ï¼ŒåƒçœŸäººæ‰“å­— |
| é€‚ç”¨åœºæ™¯ | åå°ä»»åŠ¡ã€æ‰¹é‡å¤„ç† | èŠå¤©ç•Œé¢ã€å®æ—¶äº¤äº’ |
| æŠ€æœ¯å¤æ‚åº¦ | ä½ï¼ˆæ ‡å‡†è¯·æ±‚ï¼‰ | ä¸­ï¼ˆéœ€è¦å¤„ç†æµå¼æ•°æ®ï¼‰ |
| ç½‘ç»œè¦æ±‚ | æ™®é€š HTTP | éœ€è¦ä¿æŒé•¿è¿æ¥ |

---

## å…­ã€ä¸ºä»€ä¹ˆè¦åˆ†ä¸¤ä¸ªæ¥å£ï¼Ÿ

1. **å…¼å®¹æ€§**ï¼šæŸäº›è€æ—§å®¢æˆ·ç«¯ä¸æ”¯æŒ SSE
2. **åœºæ™¯å·®å¼‚**ï¼šåå°ä»»åŠ¡ä¸éœ€è¦æµå¼
3. **é™ä½å¤æ‚åº¦**ï¼šç®€å•åœºæ™¯ç”¨ç®€å•æ¥å£
4. **çµæ´»æ€§**ï¼šè®©è°ƒç”¨æ–¹è‡ªå·±é€‰æ‹©

---

å¸Œæœ›è¿™æ¬¡è§£é‡Šæ¸…æ¥šäº†ï¼å¦‚æœè¿˜æœ‰ç–‘é—®ï¼Œéšæ—¶é—®æˆ‘ ğŸ˜Š



å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ å…¨é¢æ¢³ç†è¿™ä¸ªé¡¹ç›®çš„ç»“æ„å’Œä¸šåŠ¡æµç¨‹ï¼š

---

## ä¸€ã€é¡¹ç›®æ•´ä½“æ¶æ„

è¿™æ˜¯ä¸€ä¸ªåŸºäº **FastAPI** çš„ **AI æ‹›è˜è¾…åŠ©æœåŠ¡**ï¼Œä¸»è¦æä¾›ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š
1. **è™šæ‹Ÿå²—ä½ç”Ÿæˆ**
2. **AI æ¨¡æ‹Ÿé¢è¯•**ï¼ˆè™šæ‹Ÿé¢è¯•å®˜ï¼‰
3. **ç®€å†ä¼˜åŒ–**ï¼ˆåŸºç¡€ä¼˜åŒ– + æ·±åº¦å¯¹è¯ä¼˜åŒ–ï¼‰

---

## äºŒã€ç›®å½•ç»“æ„è§£æ

```
project_code/career/
â”œâ”€â”€ code/
â”‚   â”œâ”€â”€ app.py                    # ä¸»å…¥å£ï¼šFastAPI åº”ç”¨åˆå§‹åŒ–ã€è·¯ç”±æ³¨å†Œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ config.py            # é…ç½®åŠ è½½ï¼šä» config.yaml è¯»å– AIã€Redisã€åº”ç”¨é…ç½®
â”‚   â”‚   â””â”€â”€ loger.py             # æ—¥å¿—è®¾ç½®
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ config.yaml          # é…ç½®æ–‡ä»¶ï¼šAPI Keyã€Redisã€æ¨¡å‹åœ°å€ç­‰
â”‚   â”œâ”€â”€ routers/                 # è·¯ç”±å±‚ï¼šå®šä¹‰ HTTP æ¥å£
â”‚   â”‚   â”œâ”€â”€ virtual_position_router.py      # è™šæ‹Ÿå²—ä½ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ interview_process_router.py     # AI æ¨¡æ‹Ÿé¢è¯•
â”‚   â”‚   â”œâ”€â”€ interview_report_router.py      # é¢è¯•æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ resume_router.py                # ç®€å†ä¼˜åŒ–ï¼ˆåŸºç¡€+æ·±åº¦ï¼‰
â”‚   â”‚   â””â”€â”€ chat_router.py                  # ç®€å†å¯¹è¯ä¼˜åŒ–ï¼ˆæµå¼ï¼‰
â”‚   â”œâ”€â”€ service/                 # ä¸šåŠ¡é€»è¾‘å±‚ï¼šæ ¸å¿ƒç®—æ³•å®ç°
â”‚   â”‚   â”œâ”€â”€ virtual_interview.py            # é¢è¯•å¯¹è¯é€»è¾‘ï¼ˆCallInterview ç±»ï¼‰
â”‚   â”‚   â”œâ”€â”€ AIInterviewAssessor.py          # é¢è¯•æŠ¥å‘Šç”Ÿæˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ resumeBasicOptimize.py          # ç®€å†åŸºç¡€ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ resume_optimize.py              # ç®€å†æ·±åº¦ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ multimodal_report.py            # å¤šæ¨¡æ€æŠ¥å‘Šï¼ˆè§†é¢‘/éŸ³é¢‘åˆ†æï¼‰
â”‚   â”‚   â””â”€â”€ langchainRedisManager.py        # Redis ä¼šè¯ç®¡ç†ï¼ˆå¯¹è¯å†å²ã€é™æµï¼‰
â”‚   â”œâ”€â”€ sdk/                     # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ career/              # ä¸šåŠ¡ç›¸å…³ SDK
â”‚   â”‚   â”‚   â”œâ”€â”€ intent_prompt.py            # æ„å›¾è¯†åˆ«ï¼ˆç®€å†ä¼˜åŒ–å¯¹è¯ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ schema.py                   # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ auth_middleware.py          # é‰´æƒä¸­é—´ä»¶ï¼ˆtoken éªŒè¯ï¼‰
â”‚   â”‚   â”œâ”€â”€ limiter/
â”‚   â”‚   â”‚   â””â”€â”€ limiter.py                  # é™æµé…ç½®
â”‚   â”‚   â””â”€â”€ tts/                            # è¯­éŸ³åˆæˆï¼ˆTTSï¼‰
â”‚   â””â”€â”€ tools/                   # è¾…åŠ©å·¥å…·
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â”œâ”€â”€ Dockerfile                   # Docker éƒ¨ç½²é…ç½®
â””â”€â”€ main.py                      # ç®€å•ç¤ºä¾‹ï¼ˆå®é™…ä¸ä½¿ç”¨ï¼‰
```

---

## ä¸‰ã€6 ä¸ªæ ¸å¿ƒæ¥å£åŠä¸šåŠ¡æµç¨‹

### 1ï¸âƒ£ **è™šæ‹Ÿå²—ä½ç”Ÿæˆ** - `/jdFillingGenerate`

**æ–‡ä»¶**ï¼š`virtual_position_router.py`  
**åŠŸèƒ½**ï¼šæ ¹æ®ç”¨æˆ·ç”»åƒå’ŒæœŸæœ›èŒä½ï¼ŒAI ç”Ÿæˆè™šæ‹Ÿå…¬å¸ã€å²—ä½æè¿°ï¼ˆJDï¼‰  
**æµç¨‹**ï¼š
```
ç”¨æˆ·æäº¤ { jdParams, userPortrait }
   â†“
è°ƒç”¨å¤§æ¨¡å‹ï¼ˆQwenï¼‰ç”Ÿæˆè™šæ‹Ÿå…¬å¸ä¿¡æ¯
   â†“
è¿”å› { company, company_desc, responsibility, requirement }
```
**å…¸å‹åœºæ™¯**ï¼šæ±‚èŒè€…æƒ³ç»ƒä¹ é¢è¯•ï¼Œç³»ç»Ÿä¸ºå…¶åŒ¹é…ä¸€ä¸ªè™šæ‹Ÿå²—ä½

---

### 2ï¸âƒ£ **AI æ¨¡æ‹Ÿé¢è¯•** - `/virturlInterview`

**æ–‡ä»¶**ï¼š`interview_process_router.py` + `service/virtual_interview.py`  
**åŠŸèƒ½**ï¼šæµå¼è¿”å› AI é¢è¯•å®˜çš„å®æ—¶å¯¹è¯ï¼ˆæ”¯æŒå¤šè¯­è¨€ã€ç™½é¢†/è“é¢†æ¨¡å¼ï¼‰  
**æµç¨‹**ï¼š
```
å‰ç«¯å‘é€ { userPortrait, jdTitle, jdPortrait, interviewType, dialogHistory, id }
   â†“
CallInterview ç±»åˆå§‹åŒ–é¢è¯•ä¸Šä¸‹æ–‡
   â†“
è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆé¢è¯•å®˜å›å¤ï¼ˆä¸¤é˜¶æ®µï¼šå†³ç­– â†’ æ‰§è¡Œï¼‰
   â†“
æµå¼è¿”å›ï¼ˆSSEï¼‰â†’ å‰ç«¯è¯­éŸ³æ’­æ”¾
```
**å…³é”®ç‰¹æ€§**ï¼š
- æ”¯æŒ 9 ç§è¯­è¨€ï¼ˆä¸­/è‹±/æ—¥/éŸ©ç­‰ï¼‰
- ä¸¤ç§é¢è¯•ç±»å‹ï¼šç™½é¢†ï¼ˆä¸“ä¸šé—®ç­”ï¼‰ã€è“é¢†ï¼ˆç®€åŒ–æµç¨‹ï¼‰
- é¢è¯•å®˜ä¼šæ ¹æ®å¯¹è¯å†å²åŠ¨æ€è°ƒæ•´æé—®ç­–ç•¥
- ç»“æŸæ—¶ä¼šæç¤º"é¢è¯•åˆ°æ­¤ç»“æŸ"

---

### 3ï¸âƒ£ **é¢è¯•æŠ¥å‘Šç”Ÿæˆ** - `/interviewReport`

**æ–‡ä»¶**ï¼š`interview_report_router.py` + `service/AIInterviewAssessor.py`  
**åŠŸèƒ½**ï¼šé¢è¯•ç»“æŸåï¼Œå¼‚æ­¥ç”Ÿæˆç»¼åˆè¯„ä¼°æŠ¥å‘Š  
**æµç¨‹**ï¼š
```
å‰ç«¯æäº¤ { interview_id, transcript, jd, v_url/p_url, interview_language }
   â†“
åå°ä»»åŠ¡å¯åŠ¨ï¼ˆBackgroundTasksï¼‰
   â†“
æ­¥éª¤1ï¼šä» JD å’Œé¢è¯•è®°å½•ä¸­æå–èƒ½åŠ›è€ƒæ ¸ç»´åº¦ï¼ˆç¡¬æŠ€èƒ½/è½¯æŠ€èƒ½/æ–‡åŒ–åŒ¹é…ï¼‰
   â†“
æ­¥éª¤2ï¼šé€é¡¹è¯„ä¼°å€™é€‰äººåœ¨å„ç»´åº¦çš„è¡¨ç°ï¼ˆæ‰“åˆ† + åˆ†æï¼‰
   â†“
æ­¥éª¤3ï¼šè°ƒç”¨å¤šæ¨¡æ€åˆ†æï¼ˆè§†é¢‘/éŸ³é¢‘ï¼‰è¯„ä¼°éè¯­è¨€è¡¨ç°
   â†“
æ­¥éª¤4ï¼šç”Ÿæˆæ€»ç»“æŠ¥å‘Šï¼ˆæ€»åˆ†ã€å»ºè®®ã€ä¼˜ç¼ºç‚¹ï¼‰
   â†“
å›è°ƒåˆ°é…ç½®çš„ URLï¼ˆinterview_report_post_urlï¼‰
```
**å…³é”®é€»è¾‘**ï¼š
- èƒ½åŠ›ç»´åº¦è‡ªåŠ¨æŠ½å–ï¼ˆæœ€å¤š 10 ä¸ªç»†é¡¹ï¼‰
- æ¯é¡¹èƒ½åŠ›ç‹¬ç«‹è¯„åˆ†ï¼ˆ0-10ï¼‰
- æ”¯æŒè§†é¢‘/éŸ³é¢‘å¤šæ¨¡æ€åˆ†æ

---

### 4ï¸âƒ£ **ç®€å†åŸºç¡€ä¼˜åŒ–** - `/resumeBasicOptimize`

**æ–‡ä»¶**ï¼š`resume_router.py` + `service/resumeBasicOptimize.py`  
**åŠŸèƒ½**ï¼šå¯¹ç®€å†çš„æŸä¸€éƒ¨åˆ†ï¼ˆåŸºæœ¬ä¿¡æ¯/å·¥ä½œç»å†/é¡¹ç›®ç»å†ï¼‰è¿›è¡Œæ¶¦è‰²  
**æµç¨‹**ï¼š
```
ç”¨æˆ·æäº¤ { optimize_type, basic_info, work_experience, project_experience }
   â†“
æ ¹æ® optimize_type é€‰æ‹©ä¼˜åŒ–æ¨¡å—
   â†“
è°ƒç”¨å¤§æ¨¡å‹ä¼˜åŒ–å¯¹åº”éƒ¨åˆ†
   â†“
è¿”å›ä¼˜åŒ–åçš„æ–‡æœ¬
```

---

### 5ï¸âƒ£ **ç®€å†æ·±åº¦ä¼˜åŒ–** - `/resumeDeepOptimize`

**æ–‡ä»¶**ï¼š`resume_router.py` + `sdk/career/intent_prompt.py`  
**åŠŸèƒ½**ï¼šåŸºäºå¯¹è¯å†å²ï¼Œæ·±åº¦ä¼˜åŒ–ç®€å†ï¼ˆå¤šè½®äº¤äº’ï¼‰  
**æµç¨‹**ï¼š
```
ç”¨æˆ·æäº¤ { resume_info, dialogHistory }
   â†“
detect_intent è¯†åˆ«ç”¨æˆ·æ„å›¾
   â†“
è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆé’ˆå¯¹æ€§ä¼˜åŒ–å»ºè®®
   â†“
è¿”å›ä¼˜åŒ–ç»“æœ
```

---

### 6ï¸âƒ£ **ç®€å†å¯¹è¯ä¼˜åŒ–ï¼ˆæµå¼ï¼‰** - `/chat`

**æ–‡ä»¶**ï¼š`chat_router.py`  
**åŠŸèƒ½**ï¼šä¸ `/resumeDeepOptimize` ç±»ä¼¼ï¼Œä½†ä»¥ **SSE æµå¼** è¿”å›ï¼Œé€‚åˆå®æ—¶èŠå¤©åœºæ™¯  
**æµç¨‹**ï¼šä¸æ·±åº¦ä¼˜åŒ–ç›¸åŒï¼Œåªæ˜¯è¿”å›æ–¹å¼æ”¹ä¸ºæµå¼

---

## å››ã€æŠ€æœ¯æ ˆä¸ä¾èµ–

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| Web æ¡†æ¶ | FastAPI + Uvicorn |
| å¤§æ¨¡å‹è°ƒç”¨ | OpenAI SDKï¼ˆå…¼å®¹é˜¿é‡Œäº‘ DashScopeï¼‰ |
| ä¼šè¯ç®¡ç† | Redis + LangChain |
| é™æµ | SlowAPI |
| é‰´æƒ | è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼ˆToken + Redisï¼‰ |
| TTS | é˜¿é‡Œäº‘ DashScope TTS |
| æ—¥å¿— | Python logging |
| å¤šæ¨¡æ€åˆ†æ | è§†é¢‘/éŸ³é¢‘ URL åˆ†æ |

---

## äº”ã€æ ¸å¿ƒä¸šåŠ¡æµç¨‹å›¾

### **å®Œæ•´é¢è¯•æµç¨‹**
```
1. ç”¨æˆ·è¾“å…¥æœŸæœ›èŒä½ + ç”»åƒ
      â†“
2. è°ƒç”¨ /jdFillingGenerate ç”Ÿæˆè™šæ‹Ÿå²—ä½
      â†“
3. å‰ç«¯å‘èµ· /virturlInterview å¼€å§‹é¢è¯•
      â†“
4. ç”¨æˆ·ä¸ AI é¢è¯•å®˜å¤šè½®å¯¹è¯ï¼ˆSSE æµå¼ï¼‰
      â†“
5. é¢è¯•ç»“æŸåå‰ç«¯è°ƒç”¨ /interviewReport
      â†“
6. åå°å¼‚æ­¥ç”ŸæˆæŠ¥å‘Š â†’ å›è°ƒé€šçŸ¥å‰ç«¯
```

### **ç®€å†ä¼˜åŒ–æµç¨‹**
```
ç”¨æˆ·ä¸Šä¼ ç®€å†
   â†“
é€‰æ‹©ä¼˜åŒ–ç±»å‹ï¼š
   - å¿«é€Ÿä¼˜åŒ– â†’ /resumeBasicOptimize
   - æ·±åº¦å¯¹è¯ â†’ /resumeDeepOptimize æˆ– /chatï¼ˆæµå¼ï¼‰
   â†“
AI åˆ†æå¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®
```

---

## å…­ã€å…³é”®é…ç½®é¡¹ï¼ˆ`config.yaml`ï¼‰

```yaml
application:
  port: 9006                    # æœåŠ¡ç«¯å£
  auth: 1                       # æ˜¯å¦å¯ç”¨é‰´æƒ
  redis: "redis://..."          # Redis åœ°å€ï¼ˆä¼šè¯å­˜å‚¨ï¼‰
  redis_db: 9

ai:
  api_key: "sk-xxx"             # é˜¿é‡Œäº‘ DashScope Key
  api_model: "qwen-plus"        # æ¨¡å‹åç§°
  api_uri: "https://..."        # API åœ°å€

url:
  interview_report_post_url: "https://..."  # é¢è¯•æŠ¥å‘Šå›è°ƒåœ°å€
```

---

## ä¸ƒã€éƒ¨ç½²æ–¹å¼

### æœ¬åœ°è¿è¡Œ
```bash
cd project_code/career
conda activate career_env
python code/app.py
```

### Docker éƒ¨ç½²
```bash
docker build -t career-service .
docker run -d -p 9006:9006 career-service
```

---

## å…«ã€æ€»ç»“

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª **AI é©±åŠ¨çš„æ‹›è˜è¾…åŠ©å¹³å°åç«¯æœåŠ¡**ï¼Œæ ¸å¿ƒèƒ½åŠ›æ˜¯ï¼š
- ä¸ºæ±‚èŒè€…æä¾›è™šæ‹Ÿé¢è¯•ç»ƒä¹ ï¼ˆAI é¢è¯•å®˜ï¼‰
- è‡ªåŠ¨ç”Ÿæˆé¢è¯•è¯„ä¼°æŠ¥å‘Š
- å¸®åŠ©ä¼˜åŒ–ç®€å†å†…å®¹

æŠ€æœ¯ä¸Šé‡‡ç”¨ FastAPI + å¤§æ¨¡å‹ + Redis çš„å…¸å‹å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒæµå¼å“åº”ã€å¼‚æ­¥ä»»åŠ¡ã€å¤šè¯­è¨€ã€å¤šæ¨¡æ€åˆ†æç­‰ç‰¹æ€§ã€‚
