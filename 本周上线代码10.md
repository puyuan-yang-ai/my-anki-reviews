
---

### **1. 转换脚本**
📌 **文件路径**：  
```
DeepFashion2/evaluation/deepfashion2_to_coco.py
```
📌 **功能**：  
- 将 DeepFashion2 的 JSON 标注（`train/annos/*.json` 和 `validation/annos/*.json`）转换为 COCO 格式的 JSON 文件。  
- 适用于 **检测（Detection）** 和 **分割（Segmentation）** 任务。  

---

### **2. 转换后的 COCO 格式文件**
运行 `deepfashion2_to_coco.py` 后，会生成以下 **COCO 格式的 JSON 文件**：
#### **(1) 训练集（Training Set）**
- **`train_coco.json`**  
  - 包含 `images`、`annotations`、`categories` 三个字段，符合 COCO 格式。  
  - 适用于 **目标检测** 和 **实例分割** 任务。  

#### **(2) 验证集（Validation Set）**
- **`validation_coco.json`**  
  - 同样包含 `images`、`annotations`、`categories`，用于验证集评估。  

#### **(3) 测试集（Test Set）**
- **`test_coco.json`**（如果测试集标注可用）  
  - 测试集的标注通常不公开，但如果有，也会转换为 COCO 格式。  

---

### **3. COCO 格式的关键字段**
转换后的 JSON 文件遵循 **COCO 标注格式**，主要包含：
```json
{
  "images": [
    {
      "id": 1,
      "file_name": "000001.jpg",
      "width": 800,
      "height": 600
    },
    ...
  ],
  "annotations": [
    {
      "id": 1,
      "image_id": 1,
      "category_id": 1,
      "bbox": [x1, y1, width, height],
      "area": width * height,
      "segmentation": [[x1, y1, x2, y2, ...]],  // 多边形坐标
      "iscrowd": 0
    },
    ...
  ],
  "categories": [
    {
      "id": 1,
      "name": "short sleeve top"
    },
    ...
  ]
}
```
- `images`：图像信息（ID、文件名、宽高）。  
- `annotations`：标注信息（目标框、分割掩码、类别 ID）。  
- `categories`：类别映射（13 种服装类别）。  

---

### **4. 如何使用转换后的 COCO 标注？**
✅ **目标检测**（如 Faster R-CNN、YOLO）：
- 直接加载 `train_coco.json` 和 `validation_coco.json` 进行训练和验证。  

✅ **实例分割**（如 Mask R-CNN）：
- 使用 `segmentation` 字段提供的多边形坐标。  

✅ **关键点检测**（如 HRNet）：
- DeepFashion2 的关键点标注需要额外处理，COCO 格式默认不包含关键点信息。  

---

### **5. 注意事项**
⚠ **测试集标注不公开**：  
- 测试集（`test/image`）的标注未提供，需提交预测结果到官方评测服务器（如 CodaLab）。  

⚠ **关键点标注需单独处理**：  
- 如果要做 **关键点检测**，需要额外解析 DeepFashion2 的 `landmarks` 字段，COCO 格式默认不支持。  

---

### **总结**
| 任务 | 转换后的 COCO 文件 | 适用性 |
|------|------------------|--------|
| **目标检测** | `train_coco.json`, `validation_coco.json` | ✅ |
| **实例分割** | `train_coco.json`, `validation_coco.json` | ✅ |
| **关键点检测** | 需额外处理 `landmarks` | ❌（需自定义） |
| **测试集评估** | 无公开标注，需提交预测 | 🔄 |

如果需要 **关键点转 COCO**，可以修改 `deepfashion2_to_coco.py`，添加 `keypoints` 字段（类似 COCO 的人体姿态格式）。

DeepFashion2 是一个全面的时尚数据集，包含 491K 张多样化的图像，涵盖 13 种流行的服装类别，来自商业购物商店和消费者拍摄的照片。数据集总共标注了 801K 个服装物品，每个物品都标注了尺度、遮挡、放大、视角、类别、风格、边界框、密集关键点和像素级掩码。此外，还包含 873K 个商业-消费者服装对。

### 主要特点：
1. **数据规模**：
   - 训练集：391K 图像
   - 验证集：34K 图像
   - 测试集：67K 图像

2. **标注信息**：
   - 每个图像有对应的 JSON 标注文件，包含：
     - 来源（商业商店或消费者）
     - 配对 ID（同一商业-消费者对的图像共享相同的配对 ID）
     - 类别 ID 和名称（13 种服装类别）
     - 风格（区分同一配对 ID 下的不同服装样式）
     - 边界框、关键点（可见性标注）、分割掩码
     - 尺度、遮挡、放大、视角等属性

3. **关键点定义**：
   - 定义了 294 个关键点，覆盖 13 种服装类别，关键点的顺序和定义在数据集中有详细说明。

4. **任务支持**：
   - 服装检测（边界框和类别预测）
   - 关键点和姿态估计
   - 服装分割（像素级分类）
   - 消费者到商店的服装检索（基于检测的检索）

5. **基准性能**：
   - 提供了在验证集上的基准性能，包括 AP、AP50、AP75 等指标。
   - 对不同子集（如尺度、遮挡、放大、视角）的性能也进行了详细分析。

6. **挑战赛**：
   - 在 CVPR 2020 和 ICCV 2019 的 Workshop 中举办了 DeepFashion2 挑战赛，包括关键点估计和服装检索任务。

7. **数据下载**：
   - 数据集通过 Google Drive 提供，需要填写表单获取解压密码。

8. **引用**：
   - 使用该数据集时需引用相关论文。

### 总结：
DeepFashion2 是一个多任务、大规模的时尚数据集，适用于服装检测、关键点估计、分割和检索等任务。其丰富的标注和多样化的图像使其成为计算机视觉在时尚领域研究的重要资源。
