好的！让我结合你的确认和问题列表，用我的语言重新梳理一下整体修改逻辑：

## 📋 修改需求梳理

### 核心原则
**前端设计稿 (`overall.json`) 是基准**，接口返回需要调整以符合前端的数据结构定义。

### 需要修改的内容

#### 1. **修复 `career_advice` 数据类型不一致** ⚠️ 优先级高
- **当前状态**：接口返回是字符串
- **目标状态**：改为对象结构，包含三个字段：
  ```json
  {
    "deficiency": "字符串描述能力不足",
    "core_positions": ["数组，核心推荐岗位"],
    "potential_positions": ["数组，潜力岗位"]
  }
  ```
- **修改方式**：需要调整 **Prompt提示词**，让LLM生成对象结构而不是字符串

#### 2. **补充 `middle_term_actions` 字段** ⚠️ 优先级高
- **当前状态**：接口返回缺失这个字段
- **目标状态**：在 `user_report` 中添加 `middle_term_actions` 数组
- **修改方式**：需要在 **Prompt提示词** 中添加相关指令，让LLM生成"中期行动计划"（类似 short_term_actions 和 long_term_actions）

#### 3. **保留接口额外返回的三个大字段** ℹ️ 当前前端暂不使用，但保留
- `job_match_analysis` - 岗位匹配分析
- `personality_analysis` - 性格分析  
- `salary_analysis` - 薪资分析

这些字段前端后续可能会用到，所以接口继续返回，前端先不处理也不影响。

---

## 🎯 具体修改方案

### 修改点1：调整 `career_advice` 的Prompt

需要在生成 `user_report` 部分的Prompt中，将 `career_advice` 从自由文本改为结构化对象：

```
"career_advice": {
  "deficiency": "分析候选人当前能力不足之处，以及为何不完全匹配当前岗位",
  "core_positions": [
    "推荐2个核心岗位，格式：【岗位名称】：适配度X分，原因说明"
  ],
  "potential_positions": [
    "推荐2个潜力岗位，格式同上"
  ]
}
```

### 修改点2：添加 `middle_term_actions` 的Prompt

在 `user_report` 中补充中期行动计划的生成指令：

```
"middle_term_actions": [
  "3-6个月内的中期成长建议，每条具体可执行，介于短期和长期之间"
]
```

---

## ❓ 我的疑问

### 1. **Prompt修改的位置**
从你打开的文件看，`AIInterviewAssessor.py` 应该是生成面试报告的服务类。请问：
- Prompt是写在这个Python文件里的？
- 还是有单独的Prompt文件（比如在 `prompts/` 目录下）？
- 需要修改哪个具体文件？

### 2. **`middle_term_actions` 的时间跨度定义**
我看到：
- `short_term_actions` - 短期行动
- `long_term_actions` - 长期行动
- `middle_term_actions` - 中期行动

请问中期的时间跨度是多久？比如：
- 短期 = 1-3个月？
- 中期 = 3-6个月？
- 长期 = 6个月以上？

这样我才能在Prompt中给出准确的时间范围指引。

### 3. **是否需要调整接口返回的其他部分？**
除了 `user_report` 里的这两个问题外，其他部分（如 `overall_assessment`、`detailed_analysis` 等）是否都符合前端预期，不需要修改？

### 4. **验证方式**
修改完成后，你是打算：
- 重新跑一次面试评估生成新的JSON？
- 还是有测试用例可以验证？

---

## ✅ 确认理解

我的理解是：
1. **修改后端Prompt** → 让LLM生成符合前端设计稿的数据结构
2. **重点修复两个字段**：`career_advice`（改对象）和 `middle_term_actions`（补充）
3. **保留额外字段**：前端后续会用，不删除

**请你确认我的理解是否正确，并回答上述疑问，然后我就可以开始帮你修改了！** 👍
